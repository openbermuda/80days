<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="../../assets/xml/rss.xsl" media="all"?><rss xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/" version="2.0"><channel><title>Around the world in 80 days (django python)</title><link>http://swfiua.github.io/80days/</link><description></description><atom:link rel="self" href="http://swfiua.github.io/80days/categories/django-python.xml" type="application/rss+xml"></atom:link><language>en</language><lastBuildDate>Wed, 14 Jan 2015 17:59:50 GMT</lastBuildDate><generator>http://getnikola.com/</generator><docs>http://blogs.law.harvard.edu/tech/rss</docs><item><title>Django Rest API code generation with cog</title><link>http://swfiua.github.io/80days/posts/django-rest-api-code-generation-with-cog.html</link><dc:creator>Johnny Gill</dc:creator><description>&lt;div&gt;&lt;p&gt;After a good break for the holidays, a couple of weeks in the
frozen wastes of Canada complete with arriving home with a stinking
cold I am now at the, &lt;a href="http://swfiua.github.io/80days/posts/django-rest-api-code-generation-with-cog.html#id1"&gt;&lt;span class="problematic" id="id2"&gt;*&lt;/span&gt;&lt;/a&gt;"this code won't write itself" part of the 80 days
project.&lt;/p&gt;
&lt;div class="system-message" id="id1"&gt;
&lt;p class="system-message-title"&gt;System Message: WARNING/2 (&lt;tt class="docutils"&gt;&amp;lt;string&amp;gt;&lt;/tt&gt;, line 1); &lt;em&gt;&lt;a href="http://swfiua.github.io/80days/posts/django-rest-api-code-generation-with-cog.html#id2"&gt;backlink&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;
Inline emphasis start-string without end-string.&lt;/div&gt;
&lt;p&gt;There is quite a bit to do, but I am still finding distractions to
spend time on.&lt;/p&gt;
&lt;p&gt;I have been using &lt;a class="reference external" href="http://www.django-rest-framework.org/"&gt;django rest framework&lt;/a&gt; to create a REST api for
the project.&lt;/p&gt;
&lt;p&gt;Creating serializers, api classes and url specs for these frameworks
is largely a matter of generating standard boiler plate code.  This is
the sort of stuff I hate doing: tedious and error prone.&lt;/p&gt;
&lt;p&gt;I originally wrote my own noddy code generator to help with some of
this, but was less than satisfied with the result: it was fine for my
immediate needs, but as I add more models to the application I would
need to do more autogeneration.  I had the inescapable feeling that my
code generator was probably more trouble than it was worth.  At the
same time, writing code like this by hand is deeply unsatisfying.&lt;/p&gt;
&lt;p&gt;So, just when it was looking like I would have to start learning
&lt;a class="reference external" href="https://angularjs.org/"&gt;angular.js&lt;/a&gt; and build the front end, Ned Batchelder came to the
rescue on Twitter by &lt;a href="http://swfiua.github.io/80days/posts/django-rest-api-code-generation-with-cog.html#id3"&gt;&lt;span class="problematic" id="id4"&gt;`posting`_&lt;/span&gt;&lt;/a&gt; a link to a new release of &lt;a class="reference external" href="http://nedbatchelder.com/code/cog/"&gt;cog&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Ned described it as "a small tool that does a small job well".&lt;/p&gt;
&lt;p&gt;Sure enough, it does.  It lets you embed python code (disguised as
comments) within your code to do the code generation.&lt;/p&gt;
&lt;p&gt;There are a few features in &lt;em&gt;cog&lt;/em&gt; that appealed to me:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;the code generator can be run in a way that over-writes the input
file with the newly generated code&lt;/li&gt;
&lt;li&gt;it calculates checksums for the generated code and embeds them in
the output.  This is useful as it allows it to spot if you have
edited the code since it was generated and hence refuse to
re-generate that code.&lt;/li&gt;
&lt;li&gt;you can re-run and it will update the existing code, assuming the
checksums have not changed.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Armed with cog, I came up with &lt;a href="http://swfiua.github.io/80days/posts/django-rest-api-code-generation-with-cog.html#id5"&gt;&lt;span class="problematic" id="id6"&gt;`codegen.py`_&lt;/span&gt;&lt;/a&gt; to generate the boring
bits of &lt;a href="http://swfiua.github.io/80days/posts/django-rest-api-code-generation-with-cog.html#id7"&gt;&lt;span class="problematic" id="id8"&gt;`api.py`_&lt;/span&gt;&lt;/a&gt; as well as &lt;em&gt;urls.py&lt;/em&gt; and &lt;em&gt;serializers.py&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;I am quite happy with the results.  Doug Hellmann had suggested maybe
&lt;a class="reference external" href="https://cookiecutter.readthedocs.org/en/latest/"&gt;cookiecutter&lt;/a&gt; might be a better solution to this problem.  In my
case, I am using cookiecutter to get the base files for my django
application, but this code generation cannot take place until you add
some models, hence the need for cog.&lt;/p&gt;
&lt;p&gt;Better still would be to combine the two and add codegen.py and
suitable urls.py, serializers.py and api.py to the cookiecutter
template.  I'll add that to the list of things to do, if only to delay
the learning of &lt;a class="reference external" href="https://angularjs.org/"&gt;angular.js&lt;/a&gt; ;)&lt;/p&gt;
&lt;!-- title: links --&gt;
&lt;!-- slug: references --&gt;
&lt;!-- date: 2014-11-13 14:08:31 UTC --&gt;
&lt;!-- tags: --&gt;
&lt;!-- link: --&gt;
&lt;!-- description: links to include in all posts --&gt;
&lt;!-- type: text --&gt;
&lt;div class="system-message"&gt;
&lt;p class="system-message-title"&gt;System Message: ERROR/3 (&lt;tt class="docutils"&gt;&amp;lt;string&amp;gt;&lt;/tt&gt;, line 59)&lt;/p&gt;
&lt;p&gt;Unknown directive type "posting".&lt;/p&gt;
&lt;pre class="literal-block"&gt;
.. posting:: https://twitter.com/swfiua/status/554742651082539010

&lt;/pre&gt;
&lt;/div&gt;
&lt;div class="system-message"&gt;
&lt;p class="system-message-title"&gt;System Message: ERROR/3 (&lt;tt class="docutils"&gt;&amp;lt;string&amp;gt;&lt;/tt&gt;, line 61)&lt;/p&gt;
&lt;p&gt;Unknown directive type "codegen.py".&lt;/p&gt;
&lt;pre class="literal-block"&gt;
.. codegen.py:: https://github.com/swfiua/django_eighty_days/blob/master/django_eighty_days/codegen.py

&lt;/pre&gt;
&lt;/div&gt;
&lt;div class="system-message"&gt;
&lt;p class="system-message-title"&gt;System Message: ERROR/3 (&lt;tt class="docutils"&gt;&amp;lt;string&amp;gt;&lt;/tt&gt;, line 63)&lt;/p&gt;
&lt;p&gt;Unknown directive type "api.py".&lt;/p&gt;
&lt;pre class="literal-block"&gt;
.. api.py:: https://github.com/swfiua/django_eighty_days/blob/master/django_eighty_days/api.py
&lt;/pre&gt;
&lt;/div&gt;
&lt;div class="system-messages section"&gt;
&lt;h2&gt;Docutils System Messages&lt;/h2&gt;
&lt;div class="system-message" id="id3"&gt;
&lt;p class="system-message-title"&gt;System Message: ERROR/3 (&lt;tt class="docutils"&gt;&amp;lt;string&amp;gt;&lt;/tt&gt;, line 23); &lt;em&gt;&lt;a href="http://swfiua.github.io/80days/posts/django-rest-api-code-generation-with-cog.html#id4"&gt;backlink&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;
Unknown target name: "posting".&lt;/div&gt;
&lt;div class="system-message" id="id5"&gt;
&lt;p class="system-message-title"&gt;System Message: ERROR/3 (&lt;tt class="docutils"&gt;&amp;lt;string&amp;gt;&lt;/tt&gt;, line 43); &lt;em&gt;&lt;a href="http://swfiua.github.io/80days/posts/django-rest-api-code-generation-with-cog.html#id6"&gt;backlink&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;
Unknown target name: "codegen.py".&lt;/div&gt;
&lt;div class="system-message" id="id7"&gt;
&lt;p class="system-message-title"&gt;System Message: ERROR/3 (&lt;tt class="docutils"&gt;&amp;lt;string&amp;gt;&lt;/tt&gt;, line 43); &lt;em&gt;&lt;a href="http://swfiua.github.io/80days/posts/django-rest-api-code-generation-with-cog.html#id8"&gt;backlink&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;
Unknown target name: "api.py".&lt;/div&gt;
&lt;/div&gt;&lt;/div&gt;</description><category>django python</category><guid>http://swfiua.github.io/80days/posts/django-rest-api-code-generation-with-cog.html</guid><pubDate>Wed, 14 Jan 2015 21:12:36 GMT</pubDate></item></channel></rss>